(()=>{"use strict";var e={2827:(e,t,n)=>{var r=n(1035);const o={lines:10,length:0,width:12,radius:16,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-shrink",direction:1,color:"#e74c3c",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"};class a{constructor(e){this.target=e,this.spinner=new r.$(o)}start(){this.spinner.spin(this.target),this.target.classList.add("opaque")}stop(){this.spinner.stop(),this.target.classList.remove("opaque")}}const d={success(e){alertify.success(e)},error(e){alertify.error(e)}};var i=n(6165);const s=new a(document.getElementById("documents")),c=new a(document.getElementById("add-folder-block")),l=new a(document.getElementById("update-folder-block")),u=new a(document.getElementById("add-document-block")),m=new a(document.getElementById("edit-document-block")),p=new a(document.getElementById("preview-document-block")),f=document.getElementById("search"),_=document.getElementById("display_all_docs"),y=document.getElementById("documents-table"),g=document.getElementById("add-folder"),h=document.getElementById("add_folder_form"),v=document.getElementById("edit_folder_form"),b=document.getElementById("add-document"),w=document.getElementById("add_document_form"),E=document.getElementById("edit_document_form"),x=document.getElementById("document_with_expiry"),D=document.getElementById("edit_document_with_expiry"),B=document.querySelectorAll("#add-document-modal .with-expiry"),S=document.querySelectorAll("#edit-document-modal .with-expiry"),k=i.Z.create({prefixUrl:`${CONFIG.BASE_URL}api/document/`}),q=i.Z.create({prefixUrl:`${CONFIG.BASE_URL}api/folder/`}),L=i.Z.create({prefixUrl:`${CONFIG.BASE_URL}equipment/`});let I,M=0,Y=0,T=[{id:0,name:"Base Path",parent:0}],A=[],C={};$(".datepicker").datepicker({autoclose:!0,todayHighlight:!0,format:"yyyy-mm-dd"}),O(),f.addEventListener("keyup",(function(){P()})),_.addEventListener("change",(function(){M=_.checked?-1:0,P()}));const N=function(e){Array.from(document.querySelectorAll(`.${e}`)).forEach((function(e){e.addEventListener("dblclick",(e=>{e.preventDefault(),(async()=>{var t=e.currentTarget.getAttribute("id"),n=A.find((e=>e.item_id==t));C=n,j(),P()})()}))}))},j=()=>{document.getElementById("selected-item").innerHTML=C.item_name},F=function(){let e={};const t=function(e,t){A=t;let n='<button type="button" class="list-group-item">No records found.</button>';t.length&&(n=t.reduce(((e,t)=>`${e}\n                            <button type="button" class="list-group-item equipments-clickable-row" id="${t.item_id}">\n                                <span>${t.item_name}</span>\n                            </button>`),"")),document.querySelector(`#list-of-equipments-${e}`).innerHTML=n,N("equipments-clickable-row")};return n=>{n in e?t(n,e[n]):(async()=>{const r=`getBySubcatWithSupplierPrice/${n}/${CONFIG.supplier_id}/${CONFIG.po_currency}`,o=await L.get(r).json();e[n]=o,t(n,o)})()}}();async function P(){if(!C.item_id)return void d.error("No selected item.");s.start();let e=new FormData;e.set("search",f.value||""),function(e){let t='<tr><td class="text-center" colspan="9">No records found.</td></tr>';var n;e.list.length?t=e.list.reduce(((e,t)=>`${e}\n                    <tr>\n                        ${0==parseInt(t.is_dir)?`<td align="center">\n                            <div class="checkbox checkbox-danger" style = "margin:0px;padding-left:26px;" >\n                                <input type="checkbox" class="multiselect" name="multiselect" value="${t.id}">\n                                <label></label>\n                            </div>\n                        </td >`:"<td></td>"}\n                        <td>\n                            ${1==parseInt(t.is_dir)?`<a href="#" class="open-folder-btn" data-index="${t.id}">\n                                    <span class="fa fa-folder text-warning"></span>&nbsp; ${t.name}\n                                </a>`:`<a href="#">\n                                    <span class="fa fa-file-o text-danger"></span>&nbsp; ${t.name}\n                                </a>`}\n                        </td>\n                        <td>${t.category||""}</td>\n                        <td align="center">${t.language||""}</td>\n                        <td align="center">${t.expiry_date?moment(t.expiry_date,"YYYYMMDD").format("MMMM DD, YYYY"):""}</td>\n                        <td align="center">${t.modified_by}</td>\n                        <td align="center">${moment(t.modified_date,"YYYYMMDDhmmss").format("MMMM DD, YYYY")}</td>\n                        <td align="center">${t.status||""}</td>\n                        <td align="center" style="padding: 8px 5px;">\n                            <div class="btn-group">\n                                <button aria-expanded="false" data-toggle="dropdown" class="btn btn-default dropdown-toggle waves-effect waves-light" type="button"> <i class="fa fa-cog fa-spin m-r-5"></i> <span class="caret"></span></button>\n                                <ul role="menu" class="dropdown-menu dropdown-menu-right">\n                                    <li><a href="" class="update-${1==parseInt(t.is_dir)?"folder":"document"}-btn"title="Update" data-index="${t.id}" data-name="${t.name}"><span class="fa fa-pencil"></span>&nbsp; Update</a></li>\n                                    <li><a href="" class="delete-${1==parseInt(t.is_dir)?"folder":"document"}-btn" title="Delete" data-index="${t.id}" data-name="${t.name}"><span class="fa fa-trash"></span>&nbsp; Delete</a></li>\n                                    ${0==parseInt(t.is_dir)?`<li><a href="#" class="preview-document-btn" data-index="${t.id}" title="Document Details"><span class="fa fa-search"></span>&nbsp; Details</a></li>\n                                    <li><a href="${CONFIG.BASE_URL}api/document/previewFile/${t.id}" target="_blank" class="preview-file-btn" title="Preview Document"><span class="fa fa-search-plus"></span>&nbsp; Preview</a></li>\n                                    <li><a href="${CONFIG.BASE_URL}api/document/downloadFile/${t.uuid}" target="_blank" title="Download Document"><span class="fa fa-download"></span>&nbsp; Download</a></li>`:""}\n                                </ul>\n                            </div>\n                        </td>\n                    </tr>`),0!=e.current.id?`<tr><td colspan="9">\n                <a href="#" class="open-folder-btn" data-index="${e.current.parent}">\n                    <span class="fa fa-folder-open text-warning"></span>&nbsp; ...\n                </a>\n            </td></tr>`:""):e.list.length||0==parseInt(e.current.id)||(t=`<tr><td colspan="9">\n                    <a href="#" class="open-folder-btn" data-index="${e.current.parent}">\n                        <span class="fa fa-folder-open text-warning"></span>&nbsp; ...\n                    </a>\n                </td></tr>`),y.innerHTML=t,function(e){0==e&&T.splice(1);const t=T.findIndex((t=>t.id==e));t>0&&T.splice(t)}((n=e.current).id),0!=n.id&&T.push(n),O(),function(){const e=document.getElementsByClassName("open-folder-btn"),t=document.getElementsByClassName("delete-folder-btn"),n=document.getElementsByClassName("delete-document-btn"),r=document.getElementsByClassName("update-folder-btn"),o=document.getElementsByClassName("update-document-btn"),a=document.getElementsByClassName("preview-document-btn"),i=document.getElementsByClassName("send-notification-btn");Array.from(e).forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),M=e.currentTarget.dataset.index,P(),document.getElementById("search").value=""}))})),Array.from(t).forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();var t=e.currentTarget.dataset.index,n=e.currentTarget.dataset.name;Swal.fire({title:"Are you sure?",html:`Are you sure you want to delete ${n} folder? Folders and files inside will also be deleted.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",allowOutsideClick:!0,reverseButtons:!0}).then((async e=>{if(e.value){if(!(await q.get(`delete/${t}`).json()).success)return void d.error("Error.");d.success("Successfully deleted."),P()}}))}))})),Array.from(n).forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();var t=e.currentTarget.dataset.index,n=e.currentTarget.dataset.name;Swal.fire({title:"Are you sure?",html:`Are you sure you want to delete ${n} document?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",allowOutsideClick:!0,reverseButtons:!0}).then((async e=>{if(e.value){if(!(await k.get(`delete/${t}`).json()).success)return void d.error("Error.");d.success("Successfully deleted."),P()}}))}))})),Array.from(r).forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();let t=e.currentTarget.dataset.index;$("#edit-folder-modal").modal("show"),l.start(),q.get(`find/${t}`).json().then((e=>{Y=t,document.querySelector("#edit_folder_form #edit_folder_name").value=e.folder_name,document.querySelector("#edit_folder_form #edit_folder_description").value=e.folder_description,l.stop()}))}))})),Array.from(o).forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();let t=e.currentTarget.dataset.index;$("#edit-document-modal").modal("show"),m.start(),k.get(`find/${t}`).json().then((e=>{Y=t,document.querySelector("#edit_document_form #edit_document_name").value=e.document_name,document.querySelector("#edit_document_form #edit_document_description").value=e.document_description,document.querySelector("#edit_document_form #edit_document_language_id").value=e.document_language_id,document.querySelector("#edit_document_form #edit_document_category_id").value=e.document_category_id,document.querySelector("#edit_document_form #edit_document_with_expiry").value=e.document_with_expiry,document.querySelector("#edit_document_form #edit_document_expiry_date").value=e.document_expiry_date,document.querySelectorAll("#edit_document_form .with-expiry").forEach((t=>{t.style.display=1==+e.document_with_expiry?"block":"none"})),1==+e.document_with_expiry&&e.reminders.forEach((e=>{!function(e,t){let n=$(e+" + span > small").prop("style");n&&""!==n.backgroundColor||$(e).trigger("click").attr("checked","checked")}(`#edit_document_form #edit_reminder_${e.column}_${e.administrative_reminder_initial}_${e.administrative_reminder_id}`),document.querySelector(`#edit_document_form #edit_reminder_${e.column}_days`).value=e.days})),m.stop()}))}))})),Array.from(a).forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();let t=e.currentTarget.dataset.index;$("#document_details_modal").modal("show"),p.start(),k.get(`find/${t}`).json().then((e=>{Y=t,document.querySelector("#document_details_modal #preview_document_name").innerHTML=e.document_name,document.querySelector("#document_details_modal #preview_document_description").innerHTML=e.document_description,document.querySelector("#document_details_modal #preview_document_language").innerHTML=e.language,document.querySelector("#document_details_modal #preview_document_category").innerHTML=e.category,document.querySelector("#document_details_modal #preview_document_expiry_date").innerHTML=e.document_expiry_date?moment(e.document_expiry_date,"YYYYMMDD").format("MMMM DD, YYYY"):"&nbsp;",document.querySelector("#document_details_modal #preview_document_modified_by").innerHTML=e.modified_by,document.querySelector("#document_details_modal #preview_document_modified_date").innerHTML=moment(e.modified_date,"YYYYMMDDhmmss").format("MMMM DD, YYYY"),p.stop()}))}))})),Array.from(i).forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();var t=e.currentTarget.dataset.index;Swal.fire({title:"Are you sure?",html:"Are you sure you want to send approval notification for this document?",icon:"question",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",allowOutsideClick:!0,reverseButtons:!0}).then((async e=>{if(e.value){if(!(await k.get(`sendApprovalNotification/${t}`).json()).success)return void d.error("Error.");d.success("Successfully sent.")}}))}))}))}()}(await k.post(`getEquipmentDocuments/${M}/${C.item_id}`,{body:e}).json()),s.stop()}function O(){const e=T.reduce(((e,t,n)=>{const r=T.length==n+1;return`${e}\n                <li ${r?'class="active"':""}>\n                    ${r?t.name:`<a href="#" class="open-folder-btn" data-index="${t.id}">${t.name}</a>`}\n                </li>`}),'<li><span class="fa fa-angle-right"></span></li>');document.getElementById("heirarchy-element").innerHTML=e}Array.from(document.querySelectorAll(".sub_category_anchor")).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();let t=e.currentTarget.id;F(t)}))})),document.querySelector(".search_item").addEventListener("keyup",(e=>{var t=e.target.value;clearTimeout(I),""==t?($(".search-category-div").hide(),$(".category-div").show()):I=setTimeout((async function(){$(".category-div").hide(),$(".search-category-div").show(),function(e){if(A=e,!e.length)return void(document.querySelector(".search-category-div").innerHTML='<ul class="list-group">\n                    <button type="button" class="list-group-item">\n                        No records found.\n                    </button></ul>');let t=e.reduce((function(e,t){return`${e}\n                    <button type="button" class="list-group-item equipments-clickable-row" id="${t.item_id}">\n                        ${t.item_name} <br>\t\n                        <span style="color: #757575; font-size: 12px;">\n                            <span class="m-r-5"><b>${t.item_category_name}</b></span>\n                        </span>\n                        <span style="color: #d30000">&rarr;</span>\n                        <span style="color: #757575; font-size: 12px;font-weight: 400;">\n                        <span class="">${t.item_sub_category_name}</span>\n                        </span>\n                    </button>`}),'<ul class="list-group">');t+="</ul>",document.querySelector(".search-category-div").innerHTML=t,N("equipments-clickable-row")}(await L.get(`search_all/${encodeURIComponent(t)}`).json())}),300)})),g.addEventListener("click",(e=>{e.preventDefault(),-1!=M?C&&C.item_id?$("#add-folder-modal").modal("show"):d.error("Please select an equipment."):d.error('Please disable "Display All Documents" to select a specific folder."')})),h.addEventListener("submit",(async e=>{if(e.preventDefault(),!C||!C.item_id)return void d.error("Please select an equipment.");c.start();const t=new FormData(h),n=await q.post(`create_equipment_folder/${M}/${C.item_id}`,{body:t}).json();if(!n.success)return d.error(n.message),void c.stop();d.success("Successfully created."),$("#add-folder-modal").modal("hide"),P(),h.reset(),c.stop()})),v.addEventListener("submit",(async e=>{e.preventDefault(),l.start();const t=new FormData(v),n=await q.post(`update/${Y}`,{body:t}).json();if(!n.success)return d.error(n.message),void l.stop();d.success("Successfully updated."),$("#edit-folder-modal").modal("hide"),P(),v.reset(),l.stop()})),b.addEventListener("click",(e=>{e.preventDefault(),-1!=M?C&&C.item_id?$("#add-document-modal").modal("show"):d.error("Please select an equipment."):d.error('Please disable "Display All Documents" to select a specific folder."')})),w.addEventListener("submit",(async e=>{if(e.preventDefault(),!C||!C.item_id)return void d.error("Please select an equipment.");u.start();const t=new FormData(w);if(0==+t.get("document_with_expiry"))t.set("document_expiry_date","");else if(""==t.get("document_expiry_date").toString().trim())return d.error("Please input expiry date."),void u.stop();const n=await k.post(`addEquipmentDocument/${M}/${C.item_id}`,{body:t,timeout:6e4}).json();if(!n.success)return d.error(n.message),void u.stop();P(),d.success("Successfully created."),$("#add-document-modal").modal("hide"),w.reset(),u.stop()})),E.addEventListener("submit",(async e=>{if(e.preventDefault(),!C||!C.item_id)return void d.error("Please select an equipment.");m.start();const t=new FormData(E);if(0==+t.get("document_with_expiry"))t.set("document_expiry_date","");else if(""==t.get("document_expiry_date").toString().trim())return d.error("Please input expiry date."),void m.stop();const n=await k.post(`updateEquipmentDocument/${Y}`,{body:t}).json();if(!n.success)return d.error(n.message),void m.stop();P(),d.success("Successfully created."),$("#edit-document-modal").modal("hide"),E.reset(),m.stop()})),x.addEventListener("change",(e=>{const t=+e.currentTarget.value;B.forEach((e=>{e.style.display=t?"block":"none"}))})),D.addEventListener("change",(e=>{const t=+e.currentTarget.value;S.forEach((e=>{e.style.display=t?"block":"none"}))})),document.getElementById("download-selected-form").addEventListener("submit",(function(e){e.preventDefault();const t=document.querySelectorAll("input[name=multiselect]:checked");if(!t.length)return void d.error("Please select a document.");const n=Array.from(t).map((e=>Number(e.value)));this.action=`${CONFIG.BASE_URL}api/document/downloadFiles`,this.list.value=JSON.stringify(n),this.submit()}))}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.x=e=>{},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.j=605,(()=>{var e={605:0},t=[[2827,216]],r=e=>{},o=(o,a)=>{for(var d,i,[s,c,l,u]=a,m=0,p=[];m<s.length;m++)i=s[m],n.o(e,i)&&e[i]&&p.push(e[i][0]),e[i]=0;for(d in c)n.o(c,d)&&(n.m[d]=c[d]);for(l&&l(n),o&&o(a);p.length;)p.shift()();return u&&t.push.apply(t,u),r()},a=self.webpackChunkhotware=self.webpackChunkhotware||[];function d(){for(var r,o=0;o<t.length;o++){for(var a=t[o],d=!0,i=1;i<a.length;i++){var s=a[i];0!==e[s]&&(d=!1)}d&&(t.splice(o--,1),r=n(n.s=a[0]))}return 0===t.length&&(n.x(),n.x=e=>{}),r}a.forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a));var i=n.x;n.x=()=>(n.x=i||(e=>{}),(r=d)())})(),n.x()})();