(()=>{"use strict";var e={2208:(e,t,n)=>{var a=n(1035);const r={lines:10,length:0,width:12,radius:16,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-shrink",direction:1,color:"#e74c3c",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"};class o{constructor(e){this.target=e,this.spinner=new a.$(r)}start(){this.spinner.spin(this.target),this.target.classList.add("opaque")}stop(){this.spinner.stop(),this.target.classList.remove("opaque")}}const d={success(e){alertify.success(e)},error(e){alertify.error(e)}},s=new o(document.getElementById("documents")),c=new o(document.getElementById("add-folder-block")),i=new o(document.getElementById("update-folder-block")),l=new o(document.getElementById("add-document-block")),u=new o(document.getElementById("edit-document-block")),m=new o(document.getElementById("preview-document-block")),p=document.getElementById("search"),f=document.getElementById("display_all_docs"),_=document.getElementById("documents-table"),y=document.getElementById("add-folder"),g=document.getElementById("add_folder_form"),h=document.getElementById("edit_folder_form"),v=document.getElementById("add-document"),w=document.getElementById("add_document_form"),b=document.getElementById("edit_document_form"),x=document.getElementById("document_with_expiry"),E=document.getElementById("edit_document_with_expiry"),D=document.querySelectorAll("#add-document-modal .with-expiry"),B=document.querySelectorAll("#edit-document-modal .with-expiry"),k=ky.create({prefixUrl:`${CONFIG.BASE_URL}api/document/`}),S=ky.create({prefixUrl:`${CONFIG.BASE_URL}api/folder/`});let Y=0,L=0;const I=[{id:0,name:"Base Path",parent:0}];async function M(){s.start();const e=new FormData;e.set("search",p.value||""),function(e){let t='<tr><td class="text-center" colspan="9">No records found.</td></tr>';var n;e.list.length?t=e.list.reduce(((e,t)=>`${e}\n                    <tr>\n                        ${0==parseInt(t.is_dir)?`<td align="center">\n                            <div class="checkbox checkbox-danger" style = "margin:0px; padding-left:26px;" >\n                                <input type="checkbox" class="multiselect" name="multiselect" value="${t.id}">\n                                <label></label>\n                            </div>\n                        </td >`:"<td></td>"}\n                        <td>\n                            ${1==parseInt(t.is_dir)?`<a href="#" class="open-folder-btn" data-index="${t.id}">\n                                    <span class="fa fa-folder text-warning"></span>&nbsp; ${t.name}\n                                </a>`:`<a href="#">\n                                    <span class="fa fa-file-o text-danger"></span>&nbsp; ${t.name}\n                                </a>`}\n                        </td>\n                        <td>${t.category||""}</td>\n                        <td align="center">${t.language||""}</td>\n                        <td align="center">${t.expiry_date?moment(t.expiry_date,"YYYYMMDD").format("MMMM DD, YYYY"):""}</td>\n                        <td align="center">${t.modified_by}</td>\n                        <td align="center">${moment(t.modified_date,"YYYYMMDDhmmss").format("MMMM DD, YYYY")}</td>\n                        <td align="center">${t.status||""}</td>\n                        <td align="center" style="padding: 8px 5px;">\n                            <div class="btn-group">\n                                <button aria-expanded="false" data-toggle="dropdown" class="btn btn-default dropdown-toggle waves-effect waves-light" type="button"> <i class="fa fa-cog fa-spin m-r-5"></i> <span class="caret"></span></button>\n                                <ul role="menu" class="dropdown-menu dropdown-menu-right">\n                                    <li><a href="" class="update-${1==parseInt(t.is_dir)?"folder":"document"}-btn"title="Update" data-index="${t.id}" data-name="${t.name}"><span class="fa fa-pencil"></span>&nbsp; Update</a></li>\n                                    <li><a href="" class="delete-${1==parseInt(t.is_dir)?"folder":"document"}-btn" title="Delete" data-index="${t.id}" data-name="${t.name}"><span class="fa fa-trash"></span>&nbsp; Delete</a></li>\n                                    ${0==parseInt(t.is_dir)?`<li><a href="#" class="preview-document-btn" data-index="${t.id}" title="Document Details"><span class="fa fa-search"></span>&nbsp; Details</a></li>\n                                    <li><a href="${CONFIG.BASE_URL}api/document/previewFile/${t.id}" target="_blank" class="preview-file-btn" title="Preview Document"><span class="fa fa-search-plus"></span>&nbsp; Preview</a></li>\n                                    <li><a href="${CONFIG.BASE_URL}api/document/downloadFile/${t.uuid}" target="_blank" title="Download Document"><span class="fa fa-download"></span>&nbsp; Download</a></li>`:""}\n                                </ul>\n                            </div>\n                        </td>\n                    </tr>`),0!=e.current.id?`<tr><td colspan="9">\n                <a href="#" class="open-folder-btn" data-index="${e.current.parent}">\n                    <span class="fa fa-folder-open text-warning"></span>&nbsp; ...\n                </a>\n            </td></tr>`:""):e.list.length||0==parseInt(e.current.id)||(t=`<tr><td colspan="9">\n                    <a href="#" class="open-folder-btn" data-index="${e.current.parent}">\n                        <span class="fa fa-folder-open text-warning"></span>&nbsp; ...\n                    </a>\n                </td></tr>`),_.innerHTML=t,function(e){0==e&&I.splice(1);const t=I.findIndex((t=>t.id==e));t>0&&I.splice(t)}((n=e.current).id),0!=n.id&&I.push(n),C(),function(){const e=document.getElementsByClassName("open-folder-btn"),t=document.getElementsByClassName("delete-folder-btn"),n=document.getElementsByClassName("delete-document-btn"),a=document.getElementsByClassName("update-folder-btn"),r=document.getElementsByClassName("update-document-btn"),o=document.getElementsByClassName("preview-document-btn"),s=document.getElementsByClassName("send-notification-btn");Array.from(e).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),Y=e.currentTarget.dataset.index,M(),document.getElementById("search").value=""}))})),Array.from(t).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.currentTarget.dataset.index,n=e.currentTarget.dataset.name;Swal.fire({title:"Are you sure?",html:`Are you sure you want to delete ${n} folder? Folders and files inside will also be deleted.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",allowOutsideClick:!0,reverseButtons:!0}).then((async e=>{if(e.value){if(!(await S.get(`delete/${t}`).json()).success)return void d.error("Error.");d.success("Successfully deleted."),M()}}))}))})),Array.from(n).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.currentTarget.dataset.index,n=e.currentTarget.dataset.name;Swal.fire({title:"Are you sure?",html:`Are you sure you want to delete ${n} document?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",allowOutsideClick:!0,reverseButtons:!0}).then((async e=>{if(e.value){if(!(await k.get(`delete/${t}`).json()).success)return void d.error("Error.");d.success("Successfully deleted."),M()}}))}))})),Array.from(a).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.currentTarget.dataset.index;$("#edit-folder-modal").modal("show"),i.start(),S.get(`find/${t}`).json().then((e=>{L=t,document.querySelector("#edit_folder_form #edit_folder_name").value=e.folder_name,document.querySelector("#edit_folder_form #edit_folder_description").value=e.folder_description,i.stop()}))}))})),Array.from(r).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.currentTarget.dataset.index;$("#edit-document-modal").modal("show"),u.start(),k.get(`find/${t}`).json().then((e=>{L=t,document.querySelector("#edit_document_form #edit_document_name").value=e.document_name,document.querySelector("#edit_document_form #edit_document_description").value=e.document_description,document.querySelector("#edit_document_form #edit_document_language_id").value=e.document_language_id,document.querySelector("#edit_document_form #edit_document_category_id").value=e.document_category_id,document.querySelector("#edit_document_form #edit_document_with_expiry").value=e.document_with_expiry,document.querySelector("#edit_document_form #edit_document_expiry_date").value=e.document_expiry_date,document.querySelectorAll("#edit_document_form .with-expiry").forEach((t=>{t.style.display=1==+e.document_with_expiry?"block":"none"})),1==+e.document_with_expiry&&e.reminders.forEach((e=>{!function(e,t){let n=$(e+" + span > small").prop("style");n&&""!==n.backgroundColor||$(e).trigger("click").attr("checked","checked")}(`#edit_document_form #edit_reminder_${e.column}_${e.administrative_reminder_initial}_${e.administrative_reminder_id}`),document.querySelector(`#edit_document_form #edit_reminder_${e.column}_days`).value=e.days})),u.stop()}))}))})),Array.from(o).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.currentTarget.dataset.index;$("#document_details_modal").modal("show"),m.start(),k.get(`find/${t}`).json().then((e=>{L=t,document.querySelector("#document_details_modal #preview_document_name").innerHTML=e.document_name,document.querySelector("#document_details_modal #preview_document_description").innerHTML=e.document_description,document.querySelector("#document_details_modal #preview_document_language").innerHTML=e.language,document.querySelector("#document_details_modal #preview_document_category").innerHTML=e.category,document.querySelector("#document_details_modal #preview_document_expiry_date").innerHTML=e.document_expiry_date?moment(e.document_expiry_date,"YYYYMMDD").format("MMMM DD, YYYY"):"&nbsp;",document.querySelector("#document_details_modal #preview_document_modified_by").innerHTML=e.modified_by,document.querySelector("#document_details_modal #preview_document_modified_date").innerHTML=moment(e.modified_date,"YYYYMMDDhmmss").format("MMMM DD, YYYY"),m.stop()}))}))})),Array.from(s).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.currentTarget.dataset.index;Swal.fire({title:"Are you sure?",html:"Are you sure you want to send approval notification for this document?",icon:"question",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",allowOutsideClick:!0,reverseButtons:!0}).then((async e=>{if(e.value){if(!(await k.get(`sendApprovalNotification/${t}`).json()).success)return void d.error("Error.");d.success("Successfully sent.")}}))}))}))}()}(await k.post(`getCompanyDocuments/${Y}`,{body:e}).json()),s.stop()}function C(){const e=I.reduce(((e,t,n)=>{const a=I.length==n+1;return`${e}\n                <li ${a?'class="active"':""}>\n                    ${a?t.name:`<a href="#" class="open-folder-btn" data-index="${t.id}">${t.name}</a>`}\n                </li>`}),'<li><span class="fa fa-angle-right"></span></li>');document.getElementById("heirarchy-element").innerHTML=e}$(".datepicker").datepicker({autoclose:!0,todayHighlight:!0,format:"yyyy-mm-dd"}),M(),C(),p.addEventListener("keyup",(()=>{M()})),f.addEventListener("change",(()=>{Y=f.checked?-1:0,M()})),y.addEventListener("click",(e=>{e.preventDefault(),-1!=Y?$("#add-folder-modal").modal("show"):d.error('Please disable "Display All Documents" to select a specific folder."')})),g.addEventListener("submit",(e=>{e.preventDefault(),c.start();const t=new FormData(g);S.post(`create_company_folder/${Y}`,{body:t}).json().then((e=>{if(!e.success)return d.error(e.message),void c.stop();d.success("Successfully created."),$("#add-folder-modal").modal("hide"),M(),g.reset(),c.stop()}))})),h.addEventListener("submit",(async e=>{e.preventDefault(),i.start();const t=new FormData(h),n=await S.post(`update/${L}`,{body:t}).json();if(!n.success)return d.error(n.message),void i.stop();d.success("Successfully updated."),$("#edit-folder-modal").modal("hide"),M(),h.reset(),i.stop()})),v.addEventListener("click",(e=>{e.preventDefault(),-1!=Y?$("#add-document-modal").modal("show"):d.error('Please disable "Display All Documents" to select a specific folder."')})),w.addEventListener("submit",(async e=>{e.preventDefault(),l.start();const t=new FormData(w);if(0==+t.get("document_with_expiry"))t.set("document_expiry_date","");else if(""==t.get("document_expiry_date").toString().trim())return d.error("Please input expiry date."),void l.stop();const n=await k.post(`addCompanyDocument/${Y}`,{body:t,timeout:6e4}).json();n.success?(M(),d.success("Successfully created."),$("#add-document-modal").modal("hide"),w.reset(),l.stop()):d.error(n.message)})),b.addEventListener("submit",(async e=>{e.preventDefault(),u.start();const t=new FormData(b);if(0==+t.get("document_with_expiry"))t.set("document_expiry_date","");else if(""==t.get("document_expiry_date").toString().trim())return d.error("Please input expiry date."),void u.stop();const n=await k.post(`updateCompanyDocument/${L}`,{body:t}).json();n.success?(M(),d.success("Successfully created."),$("#edit-document-modal").modal("hide"),b.reset(),u.stop()):d.error(n.message)})),x.addEventListener("change",(e=>{const t=+e.currentTarget.value;D.forEach((e=>{e.style.display=t?"block":"none"}))})),E.addEventListener("change",(e=>{const t=+e.currentTarget.value;B.forEach((e=>{e.style.display=t?"block":"none"}))})),document.getElementById("download-selected-form").addEventListener("submit",(function(e){e.preventDefault();const t=document.querySelectorAll("input[name=multiselect]:checked");if(!t.length)return void d.error("Please select a document.");const n=Array.from(t).map((e=>Number(e.value)));this.action=`${CONFIG.BASE_URL}api/document/downloadFiles`,this.list.value=JSON.stringify(n),this.submit()}))}},t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,n),r.exports}n.m=e,n.x=e=>{},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.j=697,(()=>{var e={697:0},t=[[2208,216]],a=e=>{},r=(r,o)=>{for(var d,s,[c,i,l,u]=o,m=0,p=[];m<c.length;m++)s=c[m],n.o(e,s)&&e[s]&&p.push(e[s][0]),e[s]=0;for(d in i)n.o(i,d)&&(n.m[d]=i[d]);for(l&&l(n),r&&r(o);p.length;)p.shift()();return u&&t.push.apply(t,u),a()},o=self.webpackChunkhotware=self.webpackChunkhotware||[];function d(){for(var a,r=0;r<t.length;r++){for(var o=t[r],d=!0,s=1;s<o.length;s++){var c=o[s];0!==e[c]&&(d=!1)}d&&(t.splice(r--,1),a=n(n.s=o[0]))}return 0===t.length&&(n.x(),n.x=e=>{}),a}o.forEach(r.bind(null,0)),o.push=r.bind(null,o.push.bind(o));var s=n.x;n.x=()=>(n.x=s||(e=>{}),(a=d)())})(),n.x()})();