(()=>{"use strict";var e={9104:(e,t,n)=>{var s=n(6165);const a=({company:e=null,elementId:t="",defaultAddress:n=0,askMemo:s=!0,withVat:d=!1,defaultVat:r=0,withContact:i=!1,defaultContact:l=0,addressInitCallback:o=null})=>{let c=[],u=[],m=[];if(e){if(s&&1==e.cms_memo_warning){let n=e.cms_memo.toString().replace(/(?:\r\n|\r|\n)/g,"<br>");Swal.fire({title:"Memo Warning",html:`<div style="text-align:left;">${n}</div>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Ok",allowOutsideClick:!1,reverseButtons:!0,width:"75rem"}).then((e=>{e.value||($(`#${t}_id`).select2(0),$(`#${t}_id`).trigger("change"),a(null,t,0))}))}c=e.addresses,u=e.vats,m=e.contact_persons}((e,t,n=0,s=null)=>{const a=e.reduce(((e,t)=>`${e}\n                    <option value="${t.cms_address_id}" ${t.cms_address_id==n?"selected":""}>\n                            ${t.cms_address_building?t.cms_address_building+", ":""}\n                            ${t.cms_address_street?t.cms_address_street+", ":""}\n                            ${t.cms_address_zip?t.cms_address_zip+" ":""}\n                            ${t.cms_address_city?t.cms_address_city+", ":""}\n                            ${t.country_name?t.country_name:""}</option>`),"");document.getElementById(`${t}_address`).innerHTML=a,$(`#${t}_address.delivery_address_select2`).select2(),s&&s()})(c,t,n,o),d&&((e,t,n=0)=>{let s=document.getElementById(`${t}_vat`);if(!s)return;const a=e.reduce(((e,t)=>{let s=!1;return 0!=n&&t.cms_vat_id==n&&(s=!0),0==n&&1==t.cms_vat_is_default&&(s=!0),`${e}\n                <option value="${t.cms_vat_id}" ${s?"selected":""}>${t.cms_vat_description}</option>`}),'<option value="0" style="min-height: 25px;"></option>');s.innerHTML=a,$(`#${t}_vat.vat_select2`).select2()})(u,t,r),i&&((e,t,n=0)=>{let s=document.getElementById(`${t}_contact`);if(!s)return;const a=e.reduce(((e,t)=>{let s=!1;return 0!=n&&t.cms_employee_id==n&&(s=!0),`${e}\n                <option value="${t.cms_employee_id}" ${s?"selected":""}>${t.cms_employee_firstname} ${t.cms_employee_lastname}</option>`}),'<option value="0" style="min-height: 25px;"></option>');s.innerHTML=a,$(`#${t}_contact.contact_select2`).select2()})(m,t,l)},d=e=>{let t=document.getElementById(e).options,n=Array.from(t).map((e=>({id:e.value,text:e.innerHTML})));$.fn.select2.amd.require(["select2/data/array","select2/utils"],(function(t,s){function a(e,t){a.__super__.constructor.call(this,e,t)}s.Extend(a,t),a.prototype.query=function(e,t){var s=[];s=e.term&&""!==e.term?n.filter((function(t){return t.text.toUpperCase().indexOf(e.term.toUpperCase())>=0})):n,"page"in e||(e.page=1);var a={};a.results=s.slice(10*(e.page-1),10*e.page),a.pagination={},a.pagination.more=10*e.page<s.length,t(a)},$(document).ready((function(){$(`#${e}.select2`).select2({ajax:{},dataAdapter:a})}))}))},r={success(e){alertify.success(e)},error(e){alertify.error(e)}};var i=n(7484),l=n.n(i),o=n(178),c=n.n(o),u=n(9387),m=n.n(u);const p="add-shipping-form",_=document.getElementById("submit-form-btn"),f=(({withVat:e=!1,withContacts:t=!1,initCallback:n=null})=>{let s={},d=e,r=t;const i=n;return({cms_id:e=0,elementId:t="",defaultAddress:n=0,askMemo:l=!0,defaultVat:o=0,defaultContact:c=0})=>{e in s?a({company:s[e],elementId:t,defaultAddress:n,askMemo:l,withVat:d,defaultVat:o,withContact:r,defaultContact:c,addressInitCallback:i}):fetch(`${CONFIG.BASE_URL}cms/get_details/${e}`).then((e=>e.json())).then((u=>{s[e]=u,a({company:u,elementId:t,defaultAddress:n,askMemo:l,withVat:d,defaultVat:o,withContact:r,defaultContact:c,addressInitCallback:i})}))}})({withContacts:!0}),g=s.Z.create({prefixUrl:`${CONFIG.BASE_URL}tasktrigger/`}),y=e=>{$(`#${p} #${e}_id`).on("change",(function(){var t=document.getElementById(`${e}_id`).value;f({cms_id:t,elementId:e})}))};l().extend(c()),l().extend(m()),d("delivery_id"),d("supplier_id"),d("copy_id"),d("shipping_industry"),$(".datepicker").datepicker({autoclose:!0,todayHighlight:!0,format:"yyyy-mm-dd"});let v=document.getElementById("delivery_id").value||0,h=document.getElementById("supplier_id").value||0,I=document.getElementById("copy_id").value||0;v&&f({cms_id:v,elementId:"delivery",defaultAddress:0,askMemo:!1}),h&&f({cms_id:h,elementId:"supplier",defaultAddress:0,askMemo:!1}),I&&f({cms_id:I,elementId:"copy",defaultAddress:0,askMemo:!1}),y("delivery"),y("supplier"),y("copy"),document.getElementById("copy-address-to-invoice-btn").addEventListener("click",(e=>{e.preventDefault();var t=document.getElementById("delivery_id").value,n=document.getElementById("delivery_address").value;$(`#${p} #supplier_id`).val(t),$(`#${p} #supplier_id`).trigger("change"),f({cms_id:t,elementId:"supplier",defaultAddress:0,askMemo:!1}),$(`#${p} #supplier_address`).val(n),$(`#${p} #supplier_address`).trigger("change")})),document.getElementById(p).addEventListener("submit",(e=>{e.preventDefault();let t=new FormData(e.target);t.set("timezone",l().tz.guess()),(async e=>{_.disabled=!0;const t=await s.Z.post(`${CONFIG.BASE_URL}api/shipping/add_details`,{body:e}).json();if(!t.success)return r.error(t.message),void(_.disabled=!1);r.success("Successfully added!"),setTimeout((function(){_.disabled=!1,window.location.href=`${CONFIG.BASE_URL}equipment/shipping/details/${t.id}`,g.post("sendEmailTask/CREATE_SHIPPING")}),500)})(t)}))}},t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.x=e=>{},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.j=371,(()=>{var e={371:0},t=[[9104,216]],s=e=>{},a=(a,d)=>{for(var r,i,[l,o,c,u]=d,m=0,p=[];m<l.length;m++)i=l[m],n.o(e,i)&&e[i]&&p.push(e[i][0]),e[i]=0;for(r in o)n.o(o,r)&&(n.m[r]=o[r]);for(c&&c(n),a&&a(d);p.length;)p.shift()();return u&&t.push.apply(t,u),s()},d=self.webpackChunkhotware=self.webpackChunkhotware||[];function r(){for(var s,a=0;a<t.length;a++){for(var d=t[a],r=!0,i=1;i<d.length;i++){var l=d[i];0!==e[l]&&(r=!1)}r&&(t.splice(a--,1),s=n(n.s=d[0]))}return 0===t.length&&(n.x(),n.x=e=>{}),s}d.forEach(a.bind(null,0)),d.push=a.bind(null,d.push.bind(d));var i=n.x;n.x=()=>(n.x=i||(e=>{}),(s=r)())})(),n.x()})();