(()=>{"use strict";var t={754:(t,e,n)=>{var a=n(165),r=n(35);const s={lines:10,length:0,width:12,radius:16,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-shrink",direction:1,color:"#e74c3c",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"};var d=n(27),o=n(438),i=n(709);const c=(t,e)=>{const n=document.querySelectorAll(`${t} a[href]`);n.length&&(0,d.R)(n,"click").pipe((0,o.b)((t=>t.preventDefault())),(0,i.U)((t=>e(t.target.getAttribute("data-ci-pagination-page"))))).subscribe()};var l=n(484),u=n.n(l),m=n(178),h=n.n(m),p=n(285),f=n.n(p);const g=document.getElementById("documents"),y=document.getElementById("document-table"),b=document.getElementById("project-task-table"),_=document.getElementById("search-document"),v=document.getElementById("search-task"),k=(document.getElementById("hotware_update_selection"),CONFIG.role_id),E="add-hotware-update-form",w="add-hotware-task-form",B="mark-task-as-done-form",I=new class{constructor(t){this.target=t,this.spinner=new r.$(s)}start(){this.spinner.spin(this.target),this.target.classList.add("opaque")}stop(){this.spinner.stop(),this.target.classList.remove("opaque")}}(g);let L=1;const S=(t=1)=>{var e=v.value;fetch(`${CONFIG.BASE_URL}dashboard/getProjectTasks/`,{method:"POST",body:new URLSearchParams({page:t,search:e})}).then((t=>t.json())).then((t=>{b.innerHTML=t.list.length?T(t.list):'<tr><td align="center" colspan="4">No records found.</td></tr>',document.getElementById("project-task-pagination").innerHTML=t.pagination,c("#project-task-pagination",S),F()}))},x=()=>{fetch(`${CONFIG.BASE_URL}dashboard/getHotwareUpdates/`).then((t=>t.json())).then((t=>{C(t)}))},j=()=>{fetch(`${CONFIG.BASE_URL}dashboard/getHotwareTasks/`).then((t=>t.json())).then((t=>{D(t)}))},C=t=>{if(t.length){let e=t.reduce(((t,e)=>`${t}\n                <tr><td><i class="ti-check"></i> <i>${e.hotware_update_description}</i></td></tr>\n                `),"");document.getElementById("hotware_update_value").innerHTML=e}else document.getElementById("hotware_update_value").innerHTML='<tr><td class="text-center" colspan="8">No records found.</td></tr>'},D=t=>{if(t.length){let e=t.reduce(((t,e)=>`${t}\n                <tr>\n                    <td>\n                        <i class="ti-pencil"></i> <i>${e.hotware_update_description}</i>\n                    </td>\n                    <td>\n                        ${1!=k?"":`<a href="#" data-identifier="${e.hotware_update_id}" class="btn btn-default btn-sm add-task-btn pull-right"> Set as Done.</a>`}\n                    </td>\n                </tr>\n                `),"");document.getElementById("hotware_task_value").innerHTML=e}else document.getElementById("hotware_task_value").innerHTML='<tr><td class="text-center" colspan="8">No records found.</td></tr>';O()},T=t=>t.reduce(((t,e)=>`${t}\n                <tr>\n                    <td class="text-justify">\n                        <span class="font-medium">\n                            ${e.task_name}\n                        </span><br/>\n                        <span class="text-muted">\n                            ${e.task_description}\n                        </span>\n                    </td>\n                    <td>\n                        <a href="${CONFIG.BASE_URL}project/details/overview/${e.project_id}">\n                            ${e.project_name}\n                        </a>\n                    </td>\n                    <td>${e.task_priority_level}</td>\n                    <td>\n                        <a href="#" data-identifier="${e.task_id}" class="btn btn-default btn-sm mark-as-done-btn"> Set as Done</a>\n                    </td>\n                </tr>`),""),N=(t,e,n)=>{Array.from(t).forEach((function(t){t.addEventListener(e,n)}))},O=()=>{var t=document.getElementsByClassName("add-task-btn"),e=document.getElementsByClassName("show-task-description");N(t,"click",(function(t){t.preventDefault();var e=t.currentTarget.dataset.identifier;A("Are you sure?","Are you sure you want to add this to the updates?",(function(){fetch(`${CONFIG.BASE_URL}dashboard/update_task/${e}`).then((t=>t.json())).then((t=>{alertify.logPosition("bottom right"),t.success&&(alertify.success("Successfully added."),x(),j())}))}))})),N(e,"click",(function(t){t.preventDefault(),A(`${t.currentTarget.dataset.name}`,`${t.currentTarget.dataset.description}`)}))},F=()=>{var t=document.getElementsByClassName("mark-as-done-btn");N(t,"click",(function(t){t.preventDefault();var e=t.currentTarget.dataset.identifier;document.getElementById("task_id").value=e,$("#mark-task-as-done-modal").modal("show")}))};function A(t,e,n,a="Yes",r="warning"){Swal.fire({title:t,html:e,icon:r,showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:a,allowOutsideClick:!0,reverseButtons:!0}).then((t=>{t.value&&n()}))}const M=t=>{const e=new FormData;return e.set("page",t),e.set("search",_.value||""),e};async function H(t=1){I.start(),L=t;const e=await a.Z.post(`${CONFIG.BASE_URL}dashboard/get_documents`,{body:M(t)}).json();y.innerHTML=e.list.length?e.list.reduce(((t,e)=>`${t}\n                <tr>\n                    <td>${e.document_name}</td>\n                    <td align="center">${e.document_type}</td>\n                    <td>${e.category}</td>\n                    <td align="center">${u()(e.document_expiry_date).format("YYYY-MM-DD")}</td>\n                    <td align="center">${e.modified_by}</td>\n                    <td align="center">${u()(e.modified_date,"YYYYMMDDHHmmss").format("YYYY-MM-DD HH:mm:ss")}</td>\n                    <td align="center">\n                        <a class="btn btn-info btn-sm" href="${CONFIG.BASE_URL}document/${e.document_type.toLowerCase()}"><i class="fa fa-link"></i></a>\n                    </td>\n                </tr>`),""):'<tr><td align="center" colspan="8">No records found.</td></tr>',document.getElementById("documents-pagination").innerHTML=e.pagination,c("#documents-pagination",H),I.stop()}u().extend(h()),u().extend(f()),k<=2&&H(),_?.addEventListener("keyup",(function(){H()})),document.getElementById(E).addEventListener("submit",(t=>{var e;t.preventDefault(),e=new FormData(t.target),alertify.logPosition("bottom right"),document.getElementById("submit-update-btn").disabled=!0,fetch(`${CONFIG.BASE_URL}dashboard/add_hotware_update`,{method:"POST",body:e}).then((t=>t.json())).then((t=>{document.getElementById("submit-update-btn").disabled=!1,t.success?(alertify.success("Successfully added!"),x(),$("#add-hotware-update-modal").modal("hide")):alertify.error(t.message),document.getElementById(E).reset()}))})),document.getElementById(w).addEventListener("submit",(t=>{var e;t.preventDefault(),e=new FormData(t.target),alertify.logPosition("bottom right"),document.getElementById("submit-task-btn").disabled=!0,fetch(`${CONFIG.BASE_URL}dashboard/add_hotware_task`,{method:"POST",body:e}).then((t=>t.json())).then((t=>{document.getElementById("submit-task-btn").disabled=!1,t.success?(alertify.success("Successfully added!"),j(),$("#add-hotware-task-modal").modal("hide")):alertify.error(t.message),document.getElementById(w).reset()}))})),document.getElementById(B).addEventListener("submit",(t=>{var e;t.preventDefault(),e=new FormData(t.target),alertify.logPosition("bottom right"),fetch(`${CONFIG.BASE_URL}dashboard/mark_as_done_by_assigned`,{method:"POST",body:e}).then((t=>t.json())).then((t=>{t.success?(alertify.success("Successfully added!"),S(),$("#mark-task-as-done-modal").modal("hide")):alertify.error(t.message),document.getElementById(B).reset()}))})),document.getElementById("search-task")?.addEventListener("keyup",(function(){S()})),x(),j(),S()}},e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={exports:{}};return t[a].call(r.exports,r,r.exports,n),r.exports}n.m=t,n.x=t=>{},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.j=293,(()=>{var t={293:0},e=[[754,216]],a=t=>{},r=(r,s)=>{for(var d,o,[i,c,l,u]=s,m=0,h=[];m<i.length;m++)o=i[m],n.o(t,o)&&t[o]&&h.push(t[o][0]),t[o]=0;for(d in c)n.o(c,d)&&(n.m[d]=c[d]);for(l&&l(n),r&&r(s);h.length;)h.shift()();return u&&e.push.apply(e,u),a()},s=self.webpackChunkqualicare=self.webpackChunkqualicare||[];function d(){for(var a,r=0;r<e.length;r++){for(var s=e[r],d=!0,o=1;o<s.length;o++){var i=s[o];0!==t[i]&&(d=!1)}d&&(e.splice(r--,1),a=n(n.s=s[0]))}return 0===e.length&&(n.x(),n.x=t=>{}),a}s.forEach(r.bind(null,0)),s.push=r.bind(null,s.push.bind(s));var o=n.x;n.x=()=>(n.x=o||(t=>{}),(a=d)())})(),n.x()})();