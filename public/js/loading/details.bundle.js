(()=>{"use strict";var e={7557:(e,t,n)=>{var a=n(6165),r=n(6455),i=n.n(r),o=n(7484),s=n.n(o),l=n(178),d=n.n(l),c=n(9387),u=n.n(c),m=n(1035);const g={lines:10,length:0,width:12,radius:16,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-shrink",direction:1,color:"#e74c3c",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"};var p=n(1474);let f="",h="",b="",y="",_=0,v=null;s().extend(d()),s().extend(u());const w=()=>new p.bt(document.getElementById(f),{draggable:`.${h}`,handle:`.${b}`,onEnd:e=>{var t;t=e.srcElement,(e=>{let t=new FormData;t.set("items",JSON.stringify(e)),t.set("timezone",s().tz.guess()),fetch(`${CONFIG.BASE_URL}${y}/updateItemPositions/${_}`,{method:"POST",body:t}).then((e=>e.json())).then((t=>{v&&v(e)}))})(Array.from(t.rows).map((e=>{if(e.classList.contains(h))return parseInt(e.dataset.identifier)})))}}),I={success(e){alertify.success(e)},error(e){alertify.error(e)}};let x,E=null,L=[];s().extend(d()),s().extend(u());const T=s().tz.guess(),C=new class{constructor(e){this.target=e,this.spinner=new m.$(g)}start(){this.spinner.spin(this.target),this.target.classList.add("opaque")}stop(){this.spinner.stop(),this.target.classList.remove("opaque")}}(document.getElementById("loading-head-table")),S=a.Z.create({prefixUrl:`${CONFIG.BASE_URL}equipment/`}),q=a.Z.create({prefixUrl:`${CONFIG.BASE_URL}api/loading/`});[].slice.call(document.querySelectorAll(".sttabs")).forEach((function(e){new CBPFWTabs(e)}));const k=function(e){Array.from(document.querySelectorAll(`.${e}`)).forEach((function(e){e.addEventListener("dblclick",(e=>{e.preventDefault(),(async()=>{var t=e.currentTarget.getAttribute("id");!async function(e,t){C.start();var n=N();for(var a in t)n.append(a,t[a]);const r=await q.post(`addItem/${e}`,{body:n}).json();r.success?(L=[...L,r.data],O(),C.stop()):I.error(r.message)}(CONFIG.loading_id,{item_id:t})})()}))}))},A=function(){let e={};const t=function(e,t){if(E=t,!t.length)return void(document.querySelector(`#list-of-equipments-${e}`).innerHTML='<button type="button" class="list-group-item">No records found.</button>');const n=t.reduce(((e,t)=>`${e}\n                    <button type="button" class="list-group-item equipments-clickable-row" id="${t.item_id}">\n                        <span>${t.item_name}</span>\n                    </button>`),"");document.querySelector(`#list-of-equipments-${e}`).innerHTML=n,k("equipments-clickable-row")};return async n=>{if(n in e)return void t(n,e[n]);const a=await S.get(`getBySubcatWithSupplierPrice/${n}`).json();e[n]=a,t(n,a)}}();!async function(){C.start();const e=await q.get(`getList/${CONFIG.loading_id}`).json();L=e,O(),C.stop()}(),B();const N=(e=null)=>{let t=e||new FormData;return t.set("timezone",T),t};function B(e=null){const t=function(e,t=null){let n=e;if(t){const a=t.toString().toLowerCase();n=e.filter((e=>{let t=e.item_set_name.toString().toLowerCase(),n="s."+e.item_set_id;return t.includes(a)||n.includes(a)}))}return n}(CONFIG.predefined_sets,e);if(!t.length)return void(document.querySelector(".set-panel").innerHTML='<ul class="list-group">\n                <button type="button" class="list-group-item">\n                    No records found.\n                </button></ul>');let n=t.reduce((function(e,t){return`${e}\n                <button type="button" class="list-group-item sets-clickable-row" id="${t.item_set_id}">\n                    ${t.item_set_name} <br>\t\n                    <span style="color: #757575; font-size: 12px;">\n                        <span class="m-r-5"><b>S.${t.item_set_id}</b></span>\n                    </span>\n                </button>`}),'<ul class="list-group">');var a;n+="</ul>",document.querySelector(".set-panel").innerHTML=n,a="sets-clickable-row",Array.from(document.querySelectorAll(`.${a}`)).forEach((function(e){e.addEventListener("dblclick",(e=>{e.preventDefault(),(async()=>{var t=e.currentTarget.getAttribute("id");!async function(e,t){C.start();var n=N();for(var a in t)n.append(a,t[a]);const r=await q.post(`addSet/${e}`,{body:n}).json();r.success?(L=[...L,r.data],O(),C.stop()):I.error(r.message)}(CONFIG.loading_id,{item_set_id:t})})()}))}))}function O(){if(L.length){let e=L.reduce((function(e,t,n){return`${e}\n                    <tr data-identifier="${t.loading_item_id}" class="item">\n                        <td class="handle" align="center" readonly><i class="fa fa-reorder"></i></td>\n                        <td data-name="loading_item_name">${t.loading_item_name}</td>\n                        <td align="center" data-name="loading_item_quantity">${t.loading_item_quantity}</td>\n                        <td align="center" data-name="loading_item_lm">${t.loading_item_lm}</td>\n                        <td align="right" data-name="loading_item_weight">${t.loading_item_weight}</td>\n                        <td align="right" readonly>${t.loading_item_quantity*t.loading_item_weight}</td>\n                        <td align="center" readonly>${1==t.loading_item_is_set?'<span class="label label-danger">Set</span>':'<span class="label label-warning">Equipment</span>'}</td>\n                        <td align="center" readonly>\n                            <a href="" class="btn btn-danger btn-sm delete-item-btn"><span class="fa fa-times"></span></a>\n                            <a href="" class="btn btn-danger btn-sm confirm-delete-item-btn hidden m-t-5" data-identifier="${t.loading_item_id}">CONFIRM</a>\n                        </td>\n                    </tr>`}),"");document.getElementById("loading-table").innerHTML=e,function(){const e=document.getElementsByClassName("delete-item-btn"),t=document.getElementsByClassName("confirm-delete-item-btn");Array.from(e).forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault(),e.nextElementSibling.classList.toggle("hidden")}))})),Array.from(t).forEach((function(e){e.addEventListener("click",(e=>{e.preventDefault();let t=e.currentTarget.dataset.identifier,n=N();q.post(`deleteItem/${CONFIG.loading_id}/${t}`,{body:n}).json().then((e=>{if(!e.success)return void I.error(e.message);let t=L.findIndex((t=>t.loading_item_id==e.id));L.splice(t,1),O()}))}))}))}(),function(){const e=2,t=4;var n;$("#loading-head-table").editableTableWidget({columns:{loading_item_name:"textarea"}}),$("#loading-head-table td").on("change",(function(n,a){let r=n.currentTarget.cellIndex;r!=e&&r!=t||(a=+(a=a.replace(/,/g,"")),n.currentTarget.innerHTML=a),function(e,t){let n=e.dataset.name,a=e.closest("tr"),r=(a.dataset.type,a.dataset.identifier),i=new FormData;i.set(n,t),i.set("timezone",T),q.post(`updateItem/${r}`,{body:i}).json().then((e=>{let t=L.findIndex((t=>t.loading_item_id==e.id));L[t]=e.data,O()}))}(n.currentTarget,a)})),$("#loading-head-table td:nth-child(3),\n        #loading-head-table td:nth-child(5)").on("validate",(function(e,t){if(!+(t=t.replace(/,/g,""))&&0!=t)return!1})),n={tableID:"loading-table",draggableClass:"item",handleClass:"handle",controllerAPI:"api/loading",keyId:CONFIG.loading_id,onUpdate:function(e){L=function(e){let t=[];for(let n of e){let e=L.filter((e=>e.loading_item_id==n));e.length&&t.push(e[0])}return t}(e)}},({tableID:f,draggableClass:h,handleClass:b,controllerAPI:y,keyId:_,onUpdate:v}=n),w()}()}else document.getElementById("loading-table").innerHTML='<tr readonly><td align="center" colspan="8">No records found.</td></tr>'}Array.from(document.querySelectorAll(".sub_category_anchor")).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();let t=e.currentTarget.id;A(t)}))})),document.querySelector(".search_item").addEventListener("keyup",(e=>{var t=e.target.value;clearTimeout(x),""==t?($(".search-category-div").hide(),$(".category-div").show()):x=setTimeout((async function(){$(".category-div").hide(),$(".search-category-div").show(),function(e){if(E=e,!e.length)return void(document.querySelector(".search-category-div").innerHTML='<ul class="list-group">\n                <button type="button" class="list-group-item">\n                    No records found.\n                </button></ul>');let t=e.reduce((function(e,t){return`${e}\n                <button type="button" class="list-group-item sets-clickable-row" id="${t.item_id}">\n                    ${t.item_name} <br>\t\n                    <span style="color: #757575; font-size: 12px;">\n                        <span class="m-r-5"><b>${t.item_category_name}</b></span>\n                    </span>\n                    <span style="color: #d30000">&rarr;</span>\n                    <span style="color: #757575; font-size: 12px;font-weight: 400;">\n                    <span class="">${t.item_sub_category_name}</span>\n                    </span>\n                </button>`}),'<ul class="list-group">');t+="</ul>",document.querySelector(".search-category-div").innerHTML=t,k("equipments-clickable-row")}(await S.get(`search_all/${encodeURIComponent(t)}`).json())}),300)})),document.querySelector(".search_set").addEventListener("keyup",(e=>{var t=e.target.value;clearTimeout(x),x=setTimeout((async function(){B(t)}),300)})),document.getElementById("delete-loading-btn").addEventListener("click",(function(e){e.preventDefault();var t=e.currentTarget.dataset.index;!function(e,t,n,a="Yes",r="warning"){i().fire({title:e,html:t,icon:r,showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:a,allowOutsideClick:!0,reverseButtons:!0}).then((e=>{e.value&&n()}))}("Are you sure?",`Are you sure you want to delete ${e.currentTarget.dataset.name}? <br>You won't be able to revert this.`,(function(){q.get(`delete/${t}`).json().then((e=>{e.success?window.location.href=`${CONFIG.BASE_URL}equipment/loading/view`:I.error(e.message)}))}))}))}},t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,n),r.exports}n.m=e,n.x=e=>{},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.j=197,(()=>{var e={197:0},t=[[7557,216]],a=e=>{},r=(r,i)=>{for(var o,s,[l,d,c,u]=i,m=0,g=[];m<l.length;m++)s=l[m],n.o(e,s)&&e[s]&&g.push(e[s][0]),e[s]=0;for(o in d)n.o(d,o)&&(n.m[o]=d[o]);for(c&&c(n),r&&r(i);g.length;)g.shift()();return u&&t.push.apply(t,u),a()},i=self.webpackChunkhotware=self.webpackChunkhotware||[];function o(){for(var a,r=0;r<t.length;r++){for(var i=t[r],o=!0,s=1;s<i.length;s++){var l=i[s];0!==e[l]&&(o=!1)}o&&(t.splice(r--,1),a=n(n.s=i[0]))}return 0===t.length&&(n.x(),n.x=e=>{}),a}i.forEach(r.bind(null,0)),i.push=r.bind(null,i.push.bind(i));var s=n.x;n.x=()=>(n.x=s||(e=>{}),(a=o)())})(),n.x()})();