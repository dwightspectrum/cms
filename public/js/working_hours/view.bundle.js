(()=>{"use strict";var t={1766:(t,e,n)=>{var a=n(6165),r=n(6455),s=n.n(r),o=n(1035);const l={lines:10,length:0,width:12,radius:16,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-shrink",direction:1,color:"#e74c3c",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"};var i=n(7027),d=n(3438),c=n(5709);const u={success(t){alertify.success(t)},error(t){alertify.error(t)}};var p=n(7484),g=n.n(p);const h=new class{constructor(t){this.target=t,this.spinner=new o.$(l)}start(){this.spinner.spin(this.target),this.target.classList.add("opaque")}stop(){this.spinner.stop(),this.target.classList.remove("opaque")}}(document.getElementById("working-hours")),f=a.Z.create({prefixUrl:`${CONFIG.BASE_URL}api/workinghours/`}),m=document.getElementById("search");let w=1;async function b(t=1){h.start(),w=t;let e=new FormData;e.set("page",t),e.set("search",m.value||"");const n=await f.post("get",{body:e}).json(),a=(r=n.list).length?r.reduce(((t,e)=>{const n=g()(e.whr_start_datetime,"YYYYMMDDHHmmss"),a=g()(e.whr_end_datetime,"YYYYMMDDHHmmss");return`${t}\n                <tr>\n                    <td>${e.user_fullname}</td>\n                    <td>${e.whr_location}</td>\n                    <td align="center">\n                        <span class="font-medium">${n.format("MMM DD, YYYY")}</span>\n                        <br/>\n                        <span class="text-muted">\n                            ${n.format("HH:mm")}\n                        </span>\n                    </td>\n                    <td align="center">\n                        <span class="font-medium">${a.format("MMM DD, YYYY")}</span>\n                        <br/>\n                        <span class="text-muted">\n                            ${a.format("HH:mm")}\n                        </span>\n                    </td>\n                    <td>${e.whr_type}</td>\n                    <td>${e.whr_shift}</td>\n                    <td>${e.whr_role}</td>\n                    <td>${e.whr_work}</td>\n                    <td align="center">${function(t,e){const n={active:{text:"PENDING",color:"rgb(254, 194, 109)",active:"rgb(254, 194, 109, 0.2)"},approved:{text:"APPROVED",color:"rgb(83, 230, 157)",active:"rgb(83, 230, 157, 0.2)"},declined:{text:"DECLINED",color:"rgb(255, 118, 118)",active:"rgb(255, 118, 118, 0.2)"}},a=parseInt(CONFIG.role)<=2?'<span class="caret"></span>':"",r=parseInt(CONFIG.role)>2?"margin-right: 0;":"";return`<div class="btn-group">\n        <button ${parseInt(CONFIG.role)<=2?'aria-expanded="false" data-toggle="dropdown"':""} class="btn btn-default dropdown-toggle waves-effect waves-light working_hours_status_toggler"\n            style="${(()=>{let e=`background: ${n[t].color};`;return parseInt(CONFIG.role)>2&&(e+="cursor: default;"),e})()}" type="button">\n            <span class="status-text" style="${r}">${n[t].text}</span> ${a}</span>\n        </button>\n        ${parseInt(CONFIG.role)<=2?`<ul role="menu" class="dropdown-menu dropdown-menu-right working_hours_status_dropdown">\n                <li>\n                    <a data-whr-id="${e}" class="on-status-changed" data-title="active" ${"active"===t&&`style="background: ${n.active.active}"`}>\n                        <span style="color: ${n.active.color}">${n.active.text}</span>\n                    </a>\n                </li>\n                <li>\n                    <a data-whr-id="${e}" class="on-status-changed" data-title="approved" ${"approved"===t&&`style="background: ${n.approved.active}"`}>\n                        <span style="color: ${n.approved.color}">${n.approved.text}</span>\n                    </a>\n                </li>\n                <li>\n                    <a data-whr-id="${e}" class="on-status-changed" data-title="declined" ${"declined"===t&&`style="background: ${n.declined.active}"`}>\n                        <span style="color: ${n.declined.color}">${n.declined.text}</span>\n                    </a>\n                </li>\n            </ul>`:""}\n    </div>`}(e.whr_status,e.whr_id)}</td>\n                    <td align="center">\n                        <div class="btn-group">\n                            <button aria-expanded="false" data-toggle="dropdown" class="btn btn-default dropdown-toggle waves-effect waves-light" type="button"> <i class="fa fa-cog m-r-5"></i> <span class="caret"></span></button>\n                            <ul role="menu" class="dropdown-menu dropdown-menu-right">\n                                <li><a href="${CONFIG.BASE_URL}reporting/workinghours/edit/${e.whr_id}" title="Delete" data-index="${e.whr_id}" data-name="${e.user_fullname}"><span class="fa fa-pencil"></span>&nbsp; Update</a></li>\n                                <li><a href="" title="Update" data-index="${e.whr_id}" data-name="${e.user_fullname}"><span class="fa fa-trash"></span>&nbsp; Delete</a></li>\n                            </ul>\n                        </div>\n                    </td>\n                </tr>`}),""):'<tr><td align="center" colspan="10">No records found.</td></tr>';var r,o,l;document.getElementById("working-hours-table").innerHTML=a,document.getElementById("pagination").innerHTML=n.pagination,((t,e)=>{const n=document.querySelectorAll(".pagination a[href]");n.length&&(0,i.R)(n,"click").pipe((0,d.b)((t=>t.preventDefault())),(0,c.U)((t=>e(t.target.getAttribute("data-ci-pagination-page"))))).subscribe()})(0,b),o=document.getElementsByClassName("delete-working-hour-btn"),l=function(t){t.preventDefault();var e,n,a=t.currentTarget.dataset.index;e=`Are you sure you want to delete this working hour by${t.currentTarget.dataset.name}? <br>You won't be able to revert this.`,n=async function(){(await f.post(`delete/${a}`).json()).success&&(u.success("Successfully deleted."),b())},s().fire({title:"Are you sure?",html:e,icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",allowOutsideClick:!0,reverseButtons:!0}).then((t=>{t.value&&n()}))},Array.from(o).forEach((function(t){t.addEventListener("click",l)})),Array.from(document.getElementsByClassName("on-status-changed")).forEach((t=>{t.addEventListener("click",(async t=>{const{whrId:e,title:n}=t.currentTarget.dataset,a=new FormData;a.append("whr_status",n),a.append("role",CONFIG.role);const r=await f.post(`update_status/${e}`,{body:a}).json();r.success?(u.success("Successfully updated."),b()):u.error(r.message)}))})),h.stop()}b(),m.addEventListener("keyup",(function(){b()}))}},e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={exports:{}};return t[a].call(r.exports,r,r.exports,n),r.exports}n.m=t,n.x=t=>{},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.j=352,(()=>{var t={352:0},e=[[1766,216]],a=t=>{},r=(r,s)=>{for(var o,l,[i,d,c,u]=s,p=0,g=[];p<i.length;p++)l=i[p],n.o(t,l)&&t[l]&&g.push(t[l][0]),t[l]=0;for(o in d)n.o(d,o)&&(n.m[o]=d[o]);for(c&&c(n),r&&r(s);g.length;)g.shift()();return u&&e.push.apply(e,u),a()},s=self.webpackChunkhotware=self.webpackChunkhotware||[];function o(){for(var a,r=0;r<e.length;r++){for(var s=e[r],o=!0,l=1;l<s.length;l++){var i=s[l];0!==t[i]&&(o=!1)}o&&(e.splice(r--,1),a=n(n.s=s[0]))}return 0===e.length&&(n.x(),n.x=t=>{}),a}s.forEach(r.bind(null,0)),s.push=r.bind(null,s.push.bind(s));var l=n.x;n.x=()=>(n.x=l||(t=>{}),(a=o)())})(),n.x()})();