(()=>{"use strict";var e={722:(e,n,t)=>{var s=t(165),a=t(455),i=t.n(a),r=t(27),c=t(438),d=t(709);const l=(e,n)=>{const t=document.querySelectorAll(`${e} a[href]`);t.length&&(0,r.R)(t,"click").pipe((0,c.b)((e=>e.preventDefault())),(0,d.U)((e=>n(e.target.getAttribute("data-ci-pagination-page"))))).subscribe()};var o=t(35);const u={lines:10,length:0,width:12,radius:16,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-shrink",direction:1,color:"#e74c3c",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"};class m{constructor(e){this.target=e,this.spinner=new o.$(u)}start(){this.spinner.spin(this.target),this.target.classList.add("opaque")}stop(){this.spinner.stop(),this.target.classList.remove("opaque")}}const p=(e,n)=>Array.from(e).forEach((e=>e.addEventListener("click",n))),v={success(e){alertify.success(e)},error(e){alertify.error(e)}},g=e=>{let n=document.getElementById(e).options,t=Array.from(n).map((e=>({id:e.value,text:e.innerHTML})));$.fn.select2.amd.require(["select2/data/array","select2/utils"],(function(n,s){function a(e,n){a.__super__.constructor.call(this,e,n)}s.Extend(a,n),a.prototype.query=function(e,n){var s=[];s=e.term&&""!==e.term?t.filter((function(n){return n.text.toUpperCase().indexOf(e.term.toUpperCase())>=0})):t,"page"in e||(e.page=1);var a={};a.results=s.slice(10*(e.page-1),10*e.page),a.pagination={},a.pagination.more=10*e.page<s.length,n(a)},$(document).ready((function(){$(`#${e}.select2`).select2({ajax:{},dataAdapter:a})}))}))},f=new m(document.getElementById("users")),y=new m(document.getElementById("emergency_contacts")),_=new m(document.getElementById("user-details-block")),h=document.getElementById("company_id"),b=document.getElementById("role_id"),w=document.getElementById("arrange_by"),B=document.getElementById("sort_by"),E=document.getElementById("search"),k=document.getElementById("user-table"),C=document.getElementById("pagination"),x=document.getElementById("emergency_contact_form"),I=document.getElementById("add-emergency-contact-panel"),T=document.getElementById("update-emergency-contact-panel"),D=$("#emergency_contact_modal"),N=$("#user_details_detail"),S=s.Z.create({prefixUrl:`${CONFIG.BASE_URL}api/user/`});let L=1,j=0,A=1,O=0;const q=async(e=1)=>{f.start(),L=e;const n=new FormData;n.set("page",e),n.set("search",E.value||""),n.set("arrange_by",w.value||""),n.set("sort_by",B.value||""),n.set("company_id",h&&h.value||0),n.set("role_id",b.value||0);const t=await(s=n,S.post("get",{body:s}).json());var s;k.innerHTML=(e=>{const n=e.list;return n.length?n.reduce(((n,t)=>{let s=`<div class="btn-group">\n                                <button aria-expanded="false" data-toggle="dropdown" class="btn btn-default dropdown-toggle waves-effect waves-light" type="button"> <i class="fa fa-cog fa-spin m-r-5"></i> <span class="caret"></span></button>\n                                <ul role="menu" class="dropdown-menu dropdown-menu-right">\n                                    <li><a href="#" class="user-popup m-r-5" title="View" id="${t.user_id}"><span class="fa fa-search"></span>&nbsp; View</a></li>\n                                    ${1!=e.read_only||CONFIG.company_id==t.company_id?`<li><a href="${CONFIG.BASE_URL}admin/user/edit/${t.user_id}"><span class="fa fa-pencil"></span>&nbsp; Edit</a></li>\n                                         <li><a href="" data-identifier="${t.user_id}" title="Delete" data-name="${t.user_firstname+" "+t.user_lastname}" class="delete-user m-r-5"><i class="fa fa-trash"></i>&nbsp; Delete</a></li>\n                                         <li class="divider"></li>\n                                        ${"locked"==t.user_status?`<li><a href="" data-identifier="${t.user_id}" title="Lock" data-name="${t.user_firstname+" "+t.user_lastname}" class="delete-user unlock-user-btn"><span class="fa fa-lock"></span> Unlock</a></li>`:`<li><a href="" data-identifier="${t.user_id}" title="Unlock" data-name="${t.user_firstname+" "+t.user_lastname}" class="delete-user lock-user-btn"><span class="fa fa-unlock"></span> Lock</a></li>`}\n                                        `:""}\n                                    <li class="divider"></li>\n                                    <li><a href="" data-identifier="${t.user_id}" title="Emergency Contacts" data-name="${t.user_firstname+" "+t.user_lastname}" class="emergency-contact-btn"><i class="fa fa-users"></i>&nbsp; Emergency Contacts</a></li>\n                                </ul>\n                            </div>`;return`${n}\n                    <tr>\n                        <td class="font-medium" align="center">${t.user_identification}</td>\n                        <td align="center"><img src='${t.user_photo}' width="70"></td>\n                        <td>\n                          <span class="font-medium">${t.user_lastname}</span>\n                          <br/><span class="text-muted">${t.user_firstname}</span>\n                        </td>\n                        <td>\n                          <span class="font-medium">${t.user_contact_number}</span>\n                          <br/><span class="text-muted">${t.user_email_address}</span>\n                        </td>\n                        <td>${t.user_current_address}</td>\n                        <td>\n                          <span class="font-medium">${t.company_name}</span>\n                          <br/><span class="text-muted">${t.role_name}</span>\n                        </td>\n                        <td align="center">${s}</td>\n                    </tr>`}),""):'<tr><td align="center" colspan="8">No records found.</td></tr>'})(t),C.innerHTML=t.pagination,l("#pagination",q),p(document.getElementsByClassName("user-popup"),(e=>{!async function(e){N.modal("show"),_.start();const n=await(t=e,S.get(`get_user/${t}`).json());var t,s;n.user_fullname=`${n.user_firstname} ${n.user_middlename} ${n.user_lastname}`,n.user_profile=`${CONFIG.BASE_URL}storage/users/${n.user_photo}`,n.user_clothe_size=n.user_clothe_size.replace(/\r?\n/g,"<br />"),document.getElementById("document_details_preview").innerHTML=`<div class="row user_details">\n        <div class="col-xs-2">\n            <img src="${(s=n).user_profile}" alt="varun" class="img-circle img-responsive" width="100">\n        </div>\n        <div class="col-xs-10">\n            <h3 class="m-b-0">${s.user_fullname}</h3>\n            <span class="line"></span>\n            <h5><span class="mdi mdi-account-card-details"></span> <span><b>${s.user_identification}</b></span></h5>\n            <h5><span class="mdi mdi-email-outline"></span> <span>${s.user_email_address}</span></h5>\n            <h5><span class="mdi mdi-phone"></span> <span>${s.user_contact_number}</span></h5>\n        </div>\n    </div>\n    <div class="card card-outline-danger">\n        <div class="card-block document-details">\n            <div class="row">\n                <div class="col-md-6">\n                    <div class="steamline">\n                        <div class="sl-item">\n                            <div class="sl-left bg-success"> <span class="mdi mdi-home"></span> </div>\n                            <div class="sl-right">\n                                <div><a href="#">Employed By</a> </div>\n                                <div class="desc">${s.company_name}</div>\n                            </div>\n                        </div>\n                        <div class="sl-item">\n                            <div class="sl-left bg-primary"> <span class="mdi mdi-account-plus"></span> </div>\n                            <div class="sl-right">\n                                <div><a href="#">Employed Type</a> </div>\n                                <div class="desc">${s.user_employed_type}</div>\n                            </div>\n                        </div>\n                        <div class="sl-item">\n                            <div class="sl-left bg-warning"> <span class="mdi mdi-gender-male"></span> </div>\n                            <div class="sl-right">\n                                <div><a href="#">Gender</a> </div>\n                                <div class="desc">${s.user_gender}</div>\n                            </div>\n                        </div>\n                        <div class="sl-item">\n                            <div class="sl-left bg-inverse"> <span class="mdi mdi-home-map-marker"></span> </div>\n                            <div class="sl-right">\n                                <div><a href="#">Current Address</a> </div>\n                                <div class="desc">${s.user_current_address}</div>\n                            </div>\n                        </div>\n                        <div class="sl-item">\n                            <div class="sl-left bg-danger"> <span class="mdi mdi-shield-outline"></span> </div>\n                            <div class="sl-right">\n                                <div><a href="#">SSS Number</a> </div>\n                                <div class="desc">${s.user_sss_number}</div>\n                            </div>\n                        </div>\n                        <div class="sl-item">\n                            <div class="sl-left bg-danger"> <span class="mdi mdi-adjust"></span> </div>\n                            <div class="sl-right">\n                                <div><a href="#">Blood Type</a> </div>\n                                <div class="desc">${s.user_blood_type}</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="col-md-6">\n                    <div class="steamline">\n                        <div class="sl-item">\n                            <div class="sl-left bg-info"> <span class="mdi mdi-account-plus"></span> </div>\n                            <div class="sl-right">\n                                <div><a href="#">Role</a> </div>\n                                <div class="desc">${s.role_name}</div>\n                            </div>\n                        </div>\n                        <div class="sl-item">\n                            <div class="sl-left bg-danger"> <span class="mdi mdi-cake-layered"></span> </div>\n                            <div class="sl-right">\n                                <div><a href="#">Birthdate</a> </div>\n                                <div class="desc">${s.user_birthdate}</div>\n                            </div>\n                        </div>\n                        <div class="sl-item">\n                            <div class="sl-left bg-warning"> <span class="mdi mdi-cake-layered"></span> </div>\n                            <div class="sl-right">\n                                <div><a href="#">Birthplace</a> </div>\n                                <div class="desc">${s.user_birthplace}</div>\n                            </div>\n                        </div>\n                        <div class="sl-item">\n                            <div class="sl-left bg-primary"> <span class="fa fa-flag"></span> </div>\n                            <div class="sl-right">\n                                <div><a href="#">Nationality</a> </div>\n                                <div class="desc">${s.user_nationality}</div>\n                            </div>\n                        </div>\n                        <div class="sl-item">\n                            <div class="sl-left bg-success"> <span class="mdi mdi-home-variant"></span> </div>\n                            <div class="sl-right">\n                                <div><a href="#">Permanent Address</a> </div>\n                                <div class="desc">${s.user_permanent_address}</div>\n                            </div>\n                        </div>\n                        <div class="sl-item">\n                            <div class="sl-left bg-danger"> <span class="mdi mdi-calendar-clock"></span> </div>\n                            <div class="sl-right">\n                                <div><a href="#">Date of Entry <span class="text-muted">(Work Start Date)</span></a> </div>\n                                <div class="desc">${s.user_start_date}</div>\n                            </div>\n                        </div>\n                        <div class="sl-item">\n                            <div class="sl-left bg-danger"> <span class="mdi mdi-tshirt-crew"></span> </div>\n                            <div class="sl-right">\n                                <div><a href="#">Clothe Size</a> </div>\n                                <div class="desc">${s.user_clothe_size}</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>`,_.stop()}(e.currentTarget.id)})),p(document.getElementsByClassName("delete-user"),(e=>{e.preventDefault();const n=e.currentTarget.dataset.identifier,t=e.currentTarget.dataset.name;i().fire({title:"Are you sure?",html:`Are you sure you want to delete ${t}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",allowOutsideClick:!0,reverseButtons:!0}).then((async e=>{e.value&&(await(e=>S.get(`delete/${e}`).json())(n),v.success("Successfully deleted."),q(L))}))})),p(document.getElementsByClassName("lock-user-btn"),(e=>{e.preventDefault();const n=e.currentTarget.dataset.identifier,t=e.currentTarget.dataset.name;i().fire({title:"Are you sure?",html:`Are you sure you want to lock ${t}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",allowOutsideClick:!0,reverseButtons:!0}).then((async e=>{e.value&&(await(e=>S.get(`lock/${e}`).json())(n),v.success("Successfully locked!"),q(L))}))})),p(document.getElementsByClassName("unlock-user-btn"),(e=>{e.preventDefault();const n=e.currentTarget.dataset.identifier,t=e.currentTarget.dataset.name;i().fire({title:"Are you sure?",html:`Are you sure you want to unlock ${t}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes",allowOutsideClick:!0,reverseButtons:!0}).then((async e=>{e.value&&(await(e=>S.get(`unlock/${e}`).json())(n),v.success("Successfully unlocked!"),q(L))}))})),p(document.getElementsByClassName("emergency-contact-btn"),(function(e){e.preventDefault(),j=e.currentTarget.dataset.identifier,document.getElementById("show-username").innerHTML=e.currentTarget.dataset.name,D.modal("show"),F()})),f.stop()};function F(e=1){y.start(),A=e,async function(e,n){let t='<tr><td class="text-center" colspan="7">No records found.</td></tr>',s=new FormData;s.set("page",e);const a=await((e,n)=>S.post(`getEmergencyContacts/${e}`,{body:n}).json())(n,s),i=Number(CONFIG.company_id)!=Number(a.user_company_id)&&1!=Number(CONFIG.role);document.getElementById("emergency_contact_form").style.display=i?"none":"block",a.list.length&&(t=a.list.reduce(((e,n)=>{let t="<td></td>";return i||(t=`<td align="center">\n                                <a class='btn btn-warning btn-sm edit-emergency-contact' data-identifier='${n.uec_id}'><i class="fa fa-pencil"></i></a>\n                                <a class='btn btn-danger btn-sm m-r-5 delete-emergency-contact'> <span class='fa fa-trash'></span></a>\n                                <a class='btn btn-danger btn-sm confirm-delete-emergency-contact m-t-5' id='${n.uec_id}' style='display:none;'>CONFIRM</a>\n                            </td>`),`${e}\n                    <tr>\n                        <td>${n.uec_firstname}</td>\n                        <td>${n.uec_middlename}</td>\n                        <td>${n.uec_lastname}</td>\n                        <td>${n.uec_relationship}</td>\n                        <td align="center">${n.uec_telephone_number}</td>\n                        <td align="center">${n.uec_mobile_number}</td>\n                        ${t}\n                    </tr>`}),"")),document.getElementById("emergency_contacts_table").innerHTML=t,document.getElementById("emergency_contacts_pagination").innerHTML=a.pagination,l("#emergency_contacts_pagination",F),function(){const e=document.getElementsByClassName("delete-emergency-contact"),n=document.getElementsByClassName("confirm-delete-emergency-contact"),t=document.getElementsByClassName("edit-emergency-contact");p(e,(function(e){e.preventDefault(),$(this).next().toggle()})),p(n,(async function(e){var n;e.preventDefault(),(await(n=e.currentTarget.id,S.get(`deleteEmergencyContact/${n}`).json())).success?(v.success("Successfully deleted!"),F(A)):v.error("Error!")})),p(t,(function(e){e.preventDefault(),O=e.currentTarget.dataset.identifier,async function(e){y.start();const n=await(e=>S.get(`getEmergencyContact/${e}`).json())(e);x.querySelector('[name="uec_firstname"]').value=n.uec_firstname,x.querySelector('[name="uec_middlename"]').value=n.uec_middlename,x.querySelector('[name="uec_lastname"]').value=n.uec_lastname,x.querySelector('[name="uec_relationship"]').value=n.uec_relationship,x.querySelector('[name="uec_telephone_number"]').value=n.uec_telephone_number,x.querySelector('[name="uec_mobile_number"]').value=n.uec_mobile_number,y.stop()}(O),I.style.display="none",T.style.display="block"}))}()}(e,j),y.stop()}document.getElementById("emergency_contact_form").addEventListener("submit",(function(e){if(e.preventDefault(),0==j)return;const n=new FormData(e.target);0==O?async function(e,n){var t,s;(await(t=n,s=e,S.post(`addEmergencyContact/${t}`,{body:s}).json())).success&&(v.success("Successfully added."),F())}(n,j):(async function(e,n){var t,s;(await(t=n,s=e,S.post(`updateEmergencyContact/${t}`,{body:s}).json())).success&&(O=0,v.success("Successfully updated."),F())}(n,O),document.getElementById("add-emergency-contact-panel").style.display="block",document.getElementById("update-emergency-contact-panel").style.display="none"),e.target.reset()})),document.getElementById("cancel-update-btn").addEventListener("click",(function(e){e.preventDefault(),O=0,I.style.display="block",T.style.display="none",x.reset()})),q(),E.addEventListener("keyup",(()=>q())),g("company_id"),g("role_id"),g("arrange_by"),g("sort_by"),$("#company_id").on("change",(function(){q()})),$("#role_id").on("change",(function(){q()})),$("#arrange_by").on("change",(function(){q()})),$("#sort_by").on("change",(function(){q()}))}},n={};function t(s){if(n[s])return n[s].exports;var a=n[s]={exports:{}};return e[s].call(a.exports,a,a.exports,t),a.exports}t.m=e,t.x=e=>{},t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.j=638,(()=>{var e={638:0},n=[[722,216]],s=e=>{},a=(a,i)=>{for(var r,c,[d,l,o,u]=i,m=0,p=[];m<d.length;m++)c=d[m],t.o(e,c)&&e[c]&&p.push(e[c][0]),e[c]=0;for(r in l)t.o(l,r)&&(t.m[r]=l[r]);for(o&&o(t),a&&a(i);p.length;)p.shift()();return u&&n.push.apply(n,u),s()},i=self.webpackChunkqualicare=self.webpackChunkqualicare||[];function r(){for(var s,a=0;a<n.length;a++){for(var i=n[a],r=!0,c=1;c<i.length;c++){var d=i[c];0!==e[d]&&(r=!1)}r&&(n.splice(a--,1),s=t(t.s=i[0]))}return 0===n.length&&(t.x(),t.x=e=>{}),s}i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i));var c=t.x;t.x=()=>(t.x=c||(e=>{}),(s=r)())})(),t.x()})();